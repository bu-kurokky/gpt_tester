const _0x23b6b6=_0x42e0;(function(_0x4f4b72,_0xf40b17){const _0x4841de=_0x42e0,_0x50ce9b=_0x4f4b72();while(!![]){try{const _0x300f33=parseInt(_0x4841de(0x1ef))/0x1+parseInt(_0x4841de(0x1f5))/0x2+parseInt(_0x4841de(0x1f3))/0x3+parseInt(_0x4841de(0x224))/0x4+parseInt(_0x4841de(0x23d))/0x5*(-parseInt(_0x4841de(0x20c))/0x6)+parseInt(_0x4841de(0x211))/0x7*(parseInt(_0x4841de(0x23f))/0x8)+-parseInt(_0x4841de(0x1df))/0x9;if(_0x300f33===_0xf40b17)break;else _0x50ce9b['push'](_0x50ce9b['shift']());}catch(_0x363b9a){_0x50ce9b['push'](_0x50ce9b['shift']());}}}(_0x598e,0x89f3d));const _0x87453b=(function(){let _0x5eb09e=!![];return function(_0x15875c,_0x4cd194){const _0xff5b17=_0x5eb09e?function(){const _0x4a081f=_0x42e0;if(_0x4cd194){const _0x3a87e8=_0x4cd194[_0x4a081f(0x241)](_0x15875c,arguments);return _0x4cd194=null,_0x3a87e8;}}:function(){};return _0x5eb09e=![],_0xff5b17;};}()),_0x4e42f8=_0x87453b(this,function(){const _0x2f2754=_0x42e0;return _0x4e42f8['toString']()[_0x2f2754(0x20f)](_0x2f2754(0x236))[_0x2f2754(0x206)]()[_0x2f2754(0x202)](_0x4e42f8)['search'](_0x2f2754(0x236));});_0x4e42f8();const _0x5b194d=(function(){let _0x11e570=!![];return function(_0x1d0a78,_0x46c24b){const _0x1bd958=_0x11e570?function(){const _0x5618d5=_0x42e0;if(_0x46c24b){const _0x46f3c2=_0x46c24b[_0x5618d5(0x241)](_0x1d0a78,arguments);return _0x46c24b=null,_0x46f3c2;}}:function(){};return _0x11e570=![],_0x1bd958;};}());(function(){_0x5b194d(this,function(){const _0x575a88=_0x42e0,_0xdb7d11=new RegExp(_0x575a88(0x242)),_0x3dbb3d=new RegExp(_0x575a88(0x219),'i'),_0x39d043=_0x1b5897(_0x575a88(0x215));!_0xdb7d11[_0x575a88(0x24c)](_0x39d043+_0x575a88(0x239))||!_0x3dbb3d[_0x575a88(0x24c)](_0x39d043+_0x575a88(0x24f))?_0x39d043('0'):_0x1b5897();})();}());const _0x3416d7=(function(){let _0x5a1fde=!![];return function(_0x25e4ba,_0x2a40f1){const _0x2d47a6=_0x5a1fde?function(){if(_0x2a40f1){const _0x15335f=_0x2a40f1['apply'](_0x25e4ba,arguments);return _0x2a40f1=null,_0x15335f;}}:function(){};return _0x5a1fde=![],_0x2d47a6;};}()),_0xa62ab8=_0x3416d7(this,function(){const _0x348d11=_0x42e0;let _0x3fcce4;try{const _0x17dfce=Function('return\x20(function()\x20'+_0x348d11(0x203)+');');_0x3fcce4=_0x17dfce();}catch(_0x39ce0d){_0x3fcce4=window;}const _0x22897c=_0x3fcce4[_0x348d11(0x22c)]=_0x3fcce4['console']||{},_0x2c2719=[_0x348d11(0x22b),_0x348d11(0x246),'info',_0x348d11(0x1fc),_0x348d11(0x201),_0x348d11(0x210),'trace'];for(let _0x1eea52=0x0;_0x1eea52<_0x2c2719[_0x348d11(0x234)];_0x1eea52++){const _0xa6772e=_0x3416d7['constructor'][_0x348d11(0x1db)][_0x348d11(0x23a)](_0x3416d7),_0x1590ba=_0x2c2719[_0x1eea52],_0x62dace=_0x22897c[_0x1590ba]||_0xa6772e;_0xa6772e[_0x348d11(0x213)]=_0x3416d7[_0x348d11(0x23a)](_0x3416d7),_0xa6772e[_0x348d11(0x206)]=_0x62dace[_0x348d11(0x206)][_0x348d11(0x23a)](_0x62dace),_0x22897c[_0x1590ba]=_0xa6772e;}});_0xa62ab8();let messageHistory=[],logHistory=[],promptTime=![],textarea,clientHeight;const formMax=window['innerHeight']*0.01*0x19;function _0x598e(){const _0x381723=['key','body','history','content','while\x20(true)\x20{}','error','confirm','&#x60;','querySelector','slice','exception','constructor','{}.constructor(\x22return\x20this\x22)(\x20)','textContent','indexOf','toString','forEach','click','gpt-3.5-turbo','getAttribute','createElement','6FapngC','removeItem','textarea','search','table','5013666SiEhxk','histories','__proto__','append','init','https://api.openai.com/v1/chat/completions','&gt;','api_key','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','startsWith','classList','add','<p><span\x20class=\x22question\x22>Q</span></p>','title','includes','height','全ての履歴を削除します。\x0a本当に削除しますか？','counter','ctrlKey','1949448zLritO','user','#chat_log\x20li','application/json','time','load','data','log','console','call','decode','action','getReader','getDate','debu','choices','length','&#x27;','(((.+)+)+)+$','<p><span\x20class=\x22answer\x22>A</span></p>','delta','chain','bind','getSeconds','scrollHeight','2700645eCywSZ','new_question','8hUWoZr','style','apply','function\x20*\x5c(\x20*\x5c)','addEventListener','scrollTop','chat_log','warn','value','role','blur','assistant','</article>','test','#chat_log\x20li:last-of-type\x20article','getElementById','input','getItem','querySelectorAll','stateObject','parse','firstElementChild','&amp;','setAttribute','innerText','read','&lt;','prototype','stringify','myKey','getMonth','17306379WszMJO','keydown','warning','string','clientHeight','metaKey','prepend','setItem','push','unshift','appendChild','Error:','<article>','preventDefault','&quot;','gger','147822bEoLvv','remove','getFullYear','innerHTML','2734698DgnOQI','replace','1530250UzcrqP','reverse'];_0x598e=function(){return _0x381723;};return _0x598e();}window[_0x23b6b6(0x243)](_0x23b6b6(0x229),function(){const _0x4f252e=_0x23b6b6;checkKey(),getHistory(),textarea=document[_0x4f252e(0x24e)](_0x4f252e(0x20e)),textarea[_0x4f252e(0x243)]('input',textAreaSize,![]),textarea[_0x4f252e(0x243)](_0x4f252e(0x1e0),chatSend,![]),clientHeight=textarea[_0x4f252e(0x1e3)],document[_0x4f252e(0x24e)]('save_key')['addEventListener'](_0x4f252e(0x208),saveKey,![]),document['getElementById'](_0x4f252e(0x23e))[_0x4f252e(0x243)]('click',newQuestion,![]),document[_0x4f252e(0x24e)]('remove_history')[_0x4f252e(0x243)](_0x4f252e(0x208),removeHistory,![]);const _0x4a9407=document[_0x4f252e(0x251)]('.h_log');if(!_0x4a9407)return![];_0x4a9407['forEach'](_0x59c98c=>{const _0x1ce2c4=_0x4f252e;_0x59c98c[_0x1ce2c4(0x243)](_0x1ce2c4(0x208),clickHistory,![]);});});function clickHistory(_0x3792e9=![]){const _0x19fc39=_0x23b6b6;let _0x3b2063;_0x3792e9[_0x19fc39(0x1f2)]?_0x3b2063=_0x3792e9['getAttribute'](_0x19fc39(0x228)):_0x3b2063=this['getAttribute']('time');const _0x3a9e82=localStorage[_0x19fc39(0x250)](_0x19fc39(0x212));nowHistory=JSON[_0x19fc39(0x253)](_0x3a9e82),nowHistory['forEach'](_0x3d3d75=>{const _0x546380=_0x19fc39;_0x3d3d75[_0x546380(0x228)]==_0x3b2063&&(promptTime=_0x3b2063,messageHistory=_0x3d3d75[_0x546380(0x22a)],switchHistory());});}function removeHistory(){const _0x11d2f1=_0x23b6b6;if(!localStorage[_0x11d2f1(0x250)](_0x11d2f1(0x212)))return;const _0xde72a8=window[_0x11d2f1(0x1fd)](_0x11d2f1(0x221));if(!_0xde72a8)return;localStorage[_0x11d2f1(0x250)](_0x11d2f1(0x212))&&(localStorage[_0x11d2f1(0x20d)](_0x11d2f1(0x212)),location['reload']());}function newQuestion(){const _0x351d4f=_0x23b6b6;document['getElementById']('warning')&&document[_0x351d4f(0x24e)](_0x351d4f(0x1e1))['remove'](),document['querySelectorAll'](_0x351d4f(0x226))['forEach'](_0x240242=>{const _0x2698c7=_0x351d4f;_0x240242[_0x2698c7(0x1f0)]();}),messageHistory=[],promptTime=![];}function switchHistory(){const _0x250cf9=_0x23b6b6;document['getElementById'](_0x250cf9(0x1e1))&&document['getElementById'](_0x250cf9(0x1e1))[_0x250cf9(0x1f0)]();const _0x49beec=document[_0x250cf9(0x24e)](_0x250cf9(0x245));document[_0x250cf9(0x251)](_0x250cf9(0x226))[_0x250cf9(0x207)](_0xcb0af5=>{const _0x219da4=_0x250cf9;_0xcb0af5[_0x219da4(0x1f0)]();});const _0x38a49f=[];let _0x468a4f=[],_0x459546='',_0x352aed='',_0x288fa5=0x0;messageHistory['forEach'](_0x5e6e6c=>{const _0x397416=_0x250cf9;return _0x5e6e6c[_0x397416(0x248)]==_0x397416(0x225)?(_0x288fa5++,_0x352aed!=''&&_0x468a4f[_0x397416(0x1e7)](_0x352aed),_0x352aed='',_0x459546+=_0x5e6e6c[_0x397416(0x1fa)],![]):(_0x459546!=''&&_0x468a4f['push'](_0x459546),_0x459546='',_0x352aed+=_0x5e6e6c['content'],![]);}),_0x468a4f[_0x250cf9(0x1e7)](_0x352aed),_0x468a4f['forEach']((_0x53f223,_0x1ec1bb)=>{const _0x47e8f9=_0x250cf9;let _0x37c981='';_0x1ec1bb%0x2==0x0?_0x37c981=_0x47e8f9(0x21d):_0x37c981=_0x47e8f9(0x237);let _0x46abbc=document[_0x47e8f9(0x20b)]('li');_0x37c981+='<article>'+marked[_0x47e8f9(0x253)](_0x53f223)+'</article>',_0x46abbc[_0x47e8f9(0x1f2)]=_0x37c981,_0x49beec[_0x47e8f9(0x1e9)](_0x46abbc),_0x49beec[_0x47e8f9(0x244)]=_0x49beec[_0x47e8f9(0x23c)];});}function htmlspecialchars(_0x47dfc5){const _0x1f2c8f=_0x23b6b6;if(typeof _0x47dfc5!==_0x1f2c8f(0x1e2))return _0x47dfc5;return _0x47dfc5['replace'](/[&'`"<>]/g,function(_0x2ffd6a){const _0x467ed5=_0x1f2c8f;return{'&':_0x467ed5(0x255),'\x27':_0x467ed5(0x235),'`':_0x467ed5(0x1fe),'\x22':_0x467ed5(0x1ed),'<':_0x467ed5(0x1da),'>':_0x467ed5(0x217)}[_0x2ffd6a];});}function getNowTime(){const _0x25acbc=_0x23b6b6,_0xedc49b=new Date();return _0xedc49b[_0x25acbc(0x1f1)]()+'/'+('0'+(_0xedc49b[_0x25acbc(0x1de)]()+0x1))[_0x25acbc(0x200)](-0x2)+'/'+('0'+_0xedc49b[_0x25acbc(0x231)]())[_0x25acbc(0x200)](-0x2)+'\x20'+('0'+_0xedc49b['getHours']())[_0x25acbc(0x200)](-0x2)+':'+('0'+_0xedc49b['getMinutes']())['slice'](-0x2)+':'+('0'+_0xedc49b[_0x25acbc(0x23b)]())['slice'](-0x2);}function textAreaSize(){const _0x524fe9=_0x23b6b6;textarea[_0x524fe9(0x240)][_0x524fe9(0x220)]=clientHeight+'px';let _0x337a1d=textarea['scrollHeight'];if(_0x337a1d>formMax){textarea[_0x524fe9(0x240)][_0x524fe9(0x220)]=formMax+'px';return;}textarea[_0x524fe9(0x240)][_0x524fe9(0x220)]=_0x337a1d+'px';}function checkKey(_0x571d87=![]){const _0x1f9576=_0x23b6b6,_0x2ac818=document[_0x1f9576(0x24e)](_0x1f9576(0x218));if(!localStorage[_0x1f9576(0x250)](_0x1f9576(0x1dd))&&_0x2ac818[_0x1f9576(0x247)]==='')return _0x571d87&&alert('必ずopen\x20aiのkeyを入力してください\x0aAPI\x20Keyが見つからないので使用できません'),![];return localStorage[_0x1f9576(0x250)](_0x1f9576(0x1dd))&&(_0x2ac818['value']=localStorage[_0x1f9576(0x250)]('myKey')),localStorage[_0x1f9576(0x1e6)](_0x1f9576(0x1dd),_0x2ac818['value']),!![];}function saveKey(){const _0x49ea45=_0x23b6b6,_0x364f55=document[_0x49ea45(0x24e)]('api_key');if(_0x364f55[_0x49ea45(0x247)]==='')return![];return localStorage['setItem'](_0x49ea45(0x1dd),_0x364f55[_0x49ea45(0x247)]),![];}function showHistory(){const _0x494d22=_0x23b6b6;console[_0x494d22(0x22b)](messageHistory);}function getHistory(){const _0x1aa1fb=_0x23b6b6;if(!localStorage[_0x1aa1fb(0x250)](_0x1aa1fb(0x212)))return![];const _0x866c20=localStorage[_0x1aa1fb(0x250)](_0x1aa1fb(0x212));logHistory=JSON[_0x1aa1fb(0x253)](_0x866c20);const _0x3dd8a7=document[_0x1aa1fb(0x24e)](_0x1aa1fb(0x1f9));logHistory[_0x1aa1fb(0x1f6)]()[_0x1aa1fb(0x207)](_0x2f8a71=>{const _0x3eabce=_0x1aa1fb;let _0x43c18d=document[_0x3eabce(0x20b)]('li'),_0x1ba15d=document['createElement']('p'),_0x171e71=document[_0x3eabce(0x20b)](_0x3eabce(0x228));_0x43c18d[_0x3eabce(0x21b)][_0x3eabce(0x21c)]('h_log'),_0x1ba15d['innerText']=_0x2f8a71[_0x3eabce(0x21e)],_0x43c18d[_0x3eabce(0x1e9)](_0x1ba15d),_0x171e71[_0x3eabce(0x1d8)]=_0x2f8a71[_0x3eabce(0x228)],_0x43c18d[_0x3eabce(0x1e9)](_0x171e71),_0x43c18d[_0x3eabce(0x1d7)](_0x3eabce(0x228),_0x2f8a71['time']),_0x3dd8a7[_0x3eabce(0x1e5)](_0x43c18d);});}async function setHistory(){const _0x500efa=_0x23b6b6;let _0x50b15c,_0x4ff520,_0x29167d;!promptTime&&(promptTime=getNowTime());const _0x26f832=document[_0x500efa(0x24e)]('history');let _0x544bb1=[];localStorage[_0x500efa(0x250)](_0x500efa(0x212))&&(_0x4ff520=localStorage[_0x500efa(0x250)]('histories'),_0x544bb1=JSON[_0x500efa(0x253)](_0x4ff520),!_0x544bb1&&(_0x544bb1=[]));if(_0x26f832[_0x500efa(0x254)]){if(_0x26f832[_0x500efa(0x254)]['getAttribute'](_0x500efa(0x228))){if(promptTime==_0x26f832[_0x500efa(0x254)][_0x500efa(0x20a)]('time')){_0x50b15c=htmlspecialchars(messageHistory[0x0]['content']),_0x29167d={'title':_0x50b15c,'time':promptTime,'data':messageHistory},_0x544bb1[0x0]=_0x29167d,_0x4ff520=JSON[_0x500efa(0x1dc)](_0x544bb1,undefined,0x1),localStorage[_0x500efa(0x1e6)](_0x500efa(0x212),_0x4ff520);return;}}}let _0x2fc9e1=document[_0x500efa(0x20b)]('li'),_0x5e02c4=document['createElement']('p'),_0x328a69=document[_0x500efa(0x20b)](_0x500efa(0x228));_0x50b15c=messageHistory[0x0]['content'],_0x29167d={'title':_0x50b15c,'time':promptTime,'data':messageHistory},_0x544bb1['length']>0x0?_0x544bb1[_0x500efa(0x1e8)](_0x29167d):_0x544bb1['push'](_0x29167d),_0x4ff520=JSON[_0x500efa(0x1dc)](_0x544bb1,undefined,0x1),localStorage['setItem'](_0x500efa(0x212),_0x4ff520),_0x5e02c4[_0x500efa(0x1d8)]=htmlspecialchars(_0x50b15c),_0x2fc9e1[_0x500efa(0x21b)]['add']('h_log'),_0x2fc9e1['appendChild'](_0x5e02c4),_0x328a69[_0x500efa(0x1d8)]=promptTime,_0x2fc9e1['setAttribute'](_0x500efa(0x228),promptTime),_0x2fc9e1[_0x500efa(0x1e9)](_0x328a69),_0x26f832[_0x500efa(0x1e5)](_0x2fc9e1),_0x2fc9e1['onclick']=()=>{clickHistory(_0x2fc9e1);};}async function chatSend(_0x44c891){const _0x3d992c=_0x23b6b6;if(_0x44c891[_0x3d992c(0x1f7)]==='Enter'&&(_0x44c891[_0x3d992c(0x223)]||_0x44c891[_0x3d992c(0x1e4)])){if(!checkKey(!![]))return;if(this[_0x3d992c(0x247)]=='')return;if(this[_0x3d992c(0x247)][_0x3d992c(0x1f4)](/\s+/g,'')=='')return;document[_0x3d992c(0x24e)](_0x3d992c(0x1e1))&&document['getElementById'](_0x3d992c(0x1e1))[_0x3d992c(0x1f0)]();_0x44c891[_0x3d992c(0x1ec)]();const _0x47f50c=document[_0x3d992c(0x24e)](_0x3d992c(0x218))[_0x3d992c(0x247)];messageHistory[_0x3d992c(0x1e7)]({'role':_0x3d992c(0x225),'content':this[_0x3d992c(0x247)]});const _0x36c9fa=_0x3d992c(0x216),_0x39bbd3=await fetch(_0x36c9fa,{'method':'POST','headers':{'Content-Type':_0x3d992c(0x227),'Authorization':'Bearer\x20'+_0x47f50c},'body':JSON['stringify']({'model':_0x3d992c(0x209),'stream':!![],'messages':messageHistory})});if(!_0x39bbd3['ok']){console['error'](_0x3d992c(0x1ea),await _0x39bbd3['text']());return;}const _0x4d15a6=document[_0x3d992c(0x24e)](_0x3d992c(0x245));let _0x39289f=_0x3d992c(0x21d);_0x39289f+=_0x3d992c(0x1eb)+marked[_0x3d992c(0x253)](this[_0x3d992c(0x247)])+_0x3d992c(0x24b);let _0x2e9efb=document[_0x3d992c(0x20b)]('li');_0x2e9efb[_0x3d992c(0x1f2)]=_0x39289f,_0x4d15a6['appendChild'](_0x2e9efb),this[_0x3d992c(0x247)]='',this[_0x3d992c(0x249)](),_0x4d15a6[_0x3d992c(0x244)]=_0x4d15a6[_0x3d992c(0x23c)];let _0x519079=document[_0x3d992c(0x20b)]('li');_0x39289f='<p><span\x20class=\x22answer\x22>A</span></p><article></article>',_0x519079[_0x3d992c(0x1f2)]=_0x39289f,_0x4d15a6[_0x3d992c(0x1e9)](_0x519079),_0x4d15a6[_0x3d992c(0x244)]=_0x4d15a6[_0x3d992c(0x23c)];let _0x1c9c2a=document[_0x3d992c(0x1ff)](_0x3d992c(0x24d));const _0x29a6e9=_0x39bbd3[_0x3d992c(0x1f8)][_0x3d992c(0x230)](),_0x2cd2bb=new TextDecoder();let _0x231183='';while(!![]){const {value:_0x2466ac,done:_0x16e719}=await _0x29a6e9[_0x3d992c(0x1d9)]();if(_0x16e719){let _0x11907e=marked['parse'](_0x1c9c2a[_0x3d992c(0x1d8)]);_0x1c9c2a[_0x3d992c(0x1f2)]=_0x11907e;break;}_0x231183+=_0x2cd2bb[_0x3d992c(0x22e)](_0x2466ac,{'stream':!![]});while(!![]){const _0x28403e=_0x231183[_0x3d992c(0x205)]('\x0a');if(_0x28403e===-0x1)break;const _0x39a714=_0x231183[_0x3d992c(0x200)](0x0,_0x28403e);_0x231183=_0x231183[_0x3d992c(0x200)](_0x28403e+0x1);if(_0x39a714[_0x3d992c(0x21a)]('data:')){if(_0x39a714[_0x3d992c(0x21f)]('[DONE]')){let _0x5250d8=marked[_0x3d992c(0x253)](_0x1c9c2a[_0x3d992c(0x204)]);_0x1c9c2a['innerHTML']=_0x5250d8,_0x4d15a6[_0x3d992c(0x244)]=_0x4d15a6['scrollHeight'],await setHistory();return;}const _0x398666=JSON[_0x3d992c(0x253)](_0x39a714['slice'](0x5));if(_0x398666[_0x3d992c(0x233)]&&_0x398666[_0x3d992c(0x233)][0x0][_0x3d992c(0x238)]&&_0x398666[_0x3d992c(0x233)][0x0][_0x3d992c(0x238)]['content']){const _0x1203d3=_0x398666['choices'][0x0][_0x3d992c(0x238)]['content'];_0x1c9c2a[_0x3d992c(0x214)](''+_0x1203d3+''),_0x4d15a6[_0x3d992c(0x244)]=_0x4d15a6['scrollHeight'],await appendAssistantResponse(_0x1203d3);}}}}}}function _0x42e0(_0x255474,_0x133deb){const _0x35a634=_0x598e();return _0x42e0=function(_0xa62ab8,_0x3416d7){_0xa62ab8=_0xa62ab8-0x1d7;let _0x2b431a=_0x35a634[_0xa62ab8];return _0x2b431a;},_0x42e0(_0x255474,_0x133deb);}async function appendAssistantResponse(_0x3d1ad9){const _0x5751dc=_0x23b6b6;messageHistory[_0x5751dc(0x1e7)]({'role':_0x5751dc(0x24a),'content':_0x3d1ad9});}function _0x1b5897(_0x5839c7){function _0x4507e0(_0x31448c){const _0x2a0f09=_0x42e0;if(typeof _0x31448c==='string')return function(_0x2fa70c){}['constructor'](_0x2a0f09(0x1fb))[_0x2a0f09(0x241)](_0x2a0f09(0x222));else(''+_0x31448c/_0x31448c)[_0x2a0f09(0x234)]!==0x1||_0x31448c%0x14===0x0?function(){return!![];}[_0x2a0f09(0x202)]('debu'+_0x2a0f09(0x1ee))[_0x2a0f09(0x22d)](_0x2a0f09(0x22f)):function(){return![];}[_0x2a0f09(0x202)](_0x2a0f09(0x232)+_0x2a0f09(0x1ee))[_0x2a0f09(0x241)](_0x2a0f09(0x252));_0x4507e0(++_0x31448c);}try{if(_0x5839c7)return _0x4507e0;else _0x4507e0(0x0);}catch(_0x23b787){}}