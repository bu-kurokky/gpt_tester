const _0x2e007b=_0xe14e;(function(_0x250177,_0x1153e4){const _0x3ec082=_0xe14e,_0x579055=_0x250177();while(!![]){try{const _0x2ef75e=parseInt(_0x3ec082(0x11b))/0x1*(parseInt(_0x3ec082(0x154))/0x2)+-parseInt(_0x3ec082(0x129))/0x3+parseInt(_0x3ec082(0x159))/0x4+-parseInt(_0x3ec082(0x13e))/0x5+parseInt(_0x3ec082(0x12d))/0x6*(parseInt(_0x3ec082(0x14f))/0x7)+parseInt(_0x3ec082(0x12b))/0x8+-parseInt(_0x3ec082(0x11d))/0x9;if(_0x2ef75e===_0x1153e4)break;else _0x579055['push'](_0x579055['shift']());}catch(_0x563929){_0x579055['push'](_0x579055['shift']());}}}(_0xc67a,0x2d495));const _0x2c3600=(function(){let _0x331f5d=!![];return function(_0x4bae27,_0xd08465){const _0x4e9b8b=_0x331f5d?function(){const _0x5547f4=_0xe14e;if(_0xd08465){const _0x4dcd98=_0xd08465[_0x5547f4(0x139)](_0x4bae27,arguments);return _0xd08465=null,_0x4dcd98;}}:function(){};return _0x331f5d=![],_0x4e9b8b;};}()),_0xa6ac84=_0x2c3600(this,function(){const _0x163e18=_0xe14e;return _0xa6ac84['toString']()['search'](_0x163e18(0x126))[_0x163e18(0x112)]()['constructor'](_0xa6ac84)['search']('(((.+)+)+)+$');});_0xa6ac84();const _0x109d3a=(function(){let _0x4a9126=!![];return function(_0x33018c,_0x2b63a6){const _0x2700d1=_0x4a9126?function(){const _0xcb0e7a=_0xe14e;if(_0x2b63a6){const _0x268851=_0x2b63a6[_0xcb0e7a(0x139)](_0x33018c,arguments);return _0x2b63a6=null,_0x268851;}}:function(){};return _0x4a9126=![],_0x2700d1;};}());(function(){_0x109d3a(this,function(){const _0x844e60=_0xe14e,_0x321f23=new RegExp(_0x844e60(0x111)),_0x4cf601=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0xa35998=_0x14a57f(_0x844e60(0x153));!_0x321f23[_0x844e60(0x15e)](_0xa35998+_0x844e60(0x151))||!_0x4cf601[_0x844e60(0x15e)](_0xa35998+_0x844e60(0x140))?_0xa35998('0'):_0x14a57f();})();}());function _0xc67a(){const _0x1c64ff=['getAttribute','metaKey','role','clientHeight','constructor','createElement','debu','setItem','data','</article>','text','.h_log','body','<p><span\x20class=\x22answer\x22>A</span></p>','new_question','getSeconds','confirm','stateObject','innerHTML','decode','history','call','trace','parse','time','keyCode','function\x20*\x5c(\x20*\x5c)','toString','slice','log','console','&#x27;','remove','bind','textContent','warn','6AGdhHm','innerText','3617055XZRPHB','onclick','height','appendChild','append','getFullYear','全ての履歴を削除します。\x0a本当に削除しますか？','prepend','getElementById','(((.+)+)+)+$','scrollHeight','classList','613764IHzHFj','&amp;','1364384HoiRlp','stringify','286662BstsRk','setAttribute','load','api_key','push','h_log','getDate','<article>','action','<p><span\x20class=\x22question\x22>Q</span></p>','unshift','replace','apply','assistant','textarea','forEach','style','26315DZOjAo','histories','input','firstElementChild','delta','getReader','keypress','add','error','ctrlKey','string','warning','innerHeight','blur','info','addEventListener','Error:','7QGodlU','myKey','chain','prototype','init','101858cmUCiG','getMonth','value','while\x20(true)\x20{}','scrollTop','1093360bcWXsB','chat_log','application/json','#chat_log\x20li','{}.constructor(\x22return\x20this\x22)(\x20)','test','__proto__','reload','counter','Bearer\x20','querySelector','user','save_key','read','click','content','getItem','length','POST','gger','removeItem','title','必ずopen\x20aiのkeyを入力してください\x0aAPI\x20Keyが見つからないので使用できません','&gt;','gpt-3.5-turbo','#chat_log\x20li:last-of-type\x20article','&#x60;','choices'];_0xc67a=function(){return _0x1c64ff;};return _0xc67a();}const _0x36f5f0=(function(){let _0x8602f=!![];return function(_0x4d8457,_0x1f7b3e){const _0x2bf99e=_0x8602f?function(){const _0x32d210=_0xe14e;if(_0x1f7b3e){const _0x17daf6=_0x1f7b3e[_0x32d210(0x139)](_0x4d8457,arguments);return _0x1f7b3e=null,_0x17daf6;}}:function(){};return _0x8602f=![],_0x2bf99e;};}()),_0xa3f87c=_0x36f5f0(this,function(){const _0x370df7=_0xe14e,_0x5e63a2=function(){const _0x36dba9=_0xe14e;let _0x4f9538;try{_0x4f9538=Function('return\x20(function()\x20'+_0x36dba9(0x15d)+');')();}catch(_0x37441c){_0x4f9538=window;}return _0x4f9538;},_0x20351f=_0x5e63a2(),_0x554697=_0x20351f[_0x370df7(0x115)]=_0x20351f[_0x370df7(0x115)]||{},_0x216d13=['log',_0x370df7(0x11a),_0x370df7(0x14c),_0x370df7(0x146),'exception','table',_0x370df7(0x10d)];for(let _0x48e331=0x0;_0x48e331<_0x216d13[_0x370df7(0xec)];_0x48e331++){const _0xf34f49=_0x36f5f0[_0x370df7(0xfb)][_0x370df7(0x152)][_0x370df7(0x118)](_0x36f5f0),_0x2ddca0=_0x216d13[_0x48e331],_0x8ea6d8=_0x554697[_0x2ddca0]||_0xf34f49;_0xf34f49[_0x370df7(0xe1)]=_0x36f5f0[_0x370df7(0x118)](_0x36f5f0),_0xf34f49['toString']=_0x8ea6d8[_0x370df7(0x112)][_0x370df7(0x118)](_0x8ea6d8),_0x554697[_0x2ddca0]=_0xf34f49;}});_0xa3f87c();let messageHistory=[],logHistory=[],promptTime=![],textarea,clientHeight;const formMax=window[_0x2e007b(0x14a)]*0.01*0x19;window[_0x2e007b(0x14d)](_0x2e007b(0x12f),function(){const _0x57e8d8=_0x2e007b;checkKey(),getHistory(),textarea=document[_0x57e8d8(0x125)](_0x57e8d8(0x13b)),textarea['addEventListener']('input',textAreaSize,![]),textarea['addEventListener'](_0x57e8d8(0x144),chatSend,![]),clientHeight=textarea[_0x57e8d8(0xfa)],document[_0x57e8d8(0x125)](_0x57e8d8(0xe7))['addEventListener'](_0x57e8d8(0xe9),saveKey,![]),document[_0x57e8d8(0x125)](_0x57e8d8(0x105))['addEventListener'](_0x57e8d8(0xe9),newQuestion,![]),document[_0x57e8d8(0x125)]('remove_history')[_0x57e8d8(0x14d)](_0x57e8d8(0xe9),removeHistory,![]);const _0x48cec7=document['querySelectorAll'](_0x57e8d8(0x102));if(!_0x48cec7)return![];_0x48cec7[_0x57e8d8(0x13c)](_0x1878fb=>{const _0x18a681=_0x57e8d8;_0x1878fb['addEventListener'](_0x18a681(0xe9),clickHistory,![]);});});function clickHistory(_0x550b92=![]){const _0x3028a4=_0x2e007b;let _0x1d7b23;_0x550b92[_0x3028a4(0x109)]?_0x1d7b23=_0x550b92[_0x3028a4(0xf7)](_0x3028a4(0x10f)):_0x1d7b23=this[_0x3028a4(0xf7)](_0x3028a4(0x10f));const _0x50b8a7=localStorage['getItem'](_0x3028a4(0x13f));nowHistory=JSON['parse'](_0x50b8a7),nowHistory[_0x3028a4(0x13c)](_0x8c67d1=>{const _0x3297ad=_0x3028a4;_0x8c67d1['time']==_0x1d7b23&&(promptTime=_0x1d7b23,messageHistory=_0x8c67d1[_0x3297ad(0xff)],switchHistory());});}function removeHistory(){const _0x20e419=_0x2e007b;if(!localStorage[_0x20e419(0xeb)](_0x20e419(0x13f)))return;const _0x2c6970=window[_0x20e419(0x107)](_0x20e419(0x123));if(!_0x2c6970)return;localStorage['getItem']('histories')&&(localStorage[_0x20e419(0xef)](_0x20e419(0x13f)),location[_0x20e419(0xe2)]());}function _0xe14e(_0x209288,_0x434149){const _0x529ea4=_0xc67a();return _0xe14e=function(_0xa3f87c,_0x36f5f0){_0xa3f87c=_0xa3f87c-0xe1;let _0x4efe71=_0x529ea4[_0xa3f87c];return _0x4efe71;},_0xe14e(_0x209288,_0x434149);}function newQuestion(){const _0x364109=_0x2e007b;document['getElementById'](_0x364109(0x149))&&document[_0x364109(0x125)](_0x364109(0x149))['remove'](),document['querySelectorAll'](_0x364109(0x15c))[_0x364109(0x13c)](_0x22eb7c=>{_0x22eb7c['remove']();}),messageHistory=[],promptTime=![];}function switchHistory(){const _0x53e7d9=_0x2e007b;document['getElementById'](_0x53e7d9(0x149))&&document[_0x53e7d9(0x125)](_0x53e7d9(0x149))['remove']();const _0x91bf3a=document[_0x53e7d9(0x125)](_0x53e7d9(0x15a));document['querySelectorAll'](_0x53e7d9(0x15c))[_0x53e7d9(0x13c)](_0x31d844=>{const _0x44c1f2=_0x53e7d9;_0x31d844[_0x44c1f2(0x117)]();});const _0x1cd11f=[];let _0x1f3100=[],_0x226fd2='',_0x50a762='',_0x498922=0x0;messageHistory[_0x53e7d9(0x13c)](_0x52974b=>{const _0x5ca248=_0x53e7d9;return _0x52974b[_0x5ca248(0xf9)]==_0x5ca248(0xe6)?(_0x498922++,_0x50a762!=''&&_0x1f3100[_0x5ca248(0x131)](_0x50a762),_0x50a762='',_0x226fd2+=_0x52974b[_0x5ca248(0xea)],![]):(_0x226fd2!=''&&_0x1f3100[_0x5ca248(0x131)](_0x226fd2),_0x226fd2='',_0x50a762+=_0x52974b[_0x5ca248(0xea)],![]);}),_0x1f3100[_0x53e7d9(0x131)](_0x50a762),_0x1f3100[_0x53e7d9(0x13c)]((_0x528cd0,_0x45ec23)=>{const _0x4bda49=_0x53e7d9;let _0x58e8dd='';_0x45ec23%0x2==0x0?_0x58e8dd=_0x4bda49(0x136):_0x58e8dd=_0x4bda49(0x104);let _0x8fe323=document['createElement']('li');_0x58e8dd+=_0x4bda49(0x134)+marked[_0x4bda49(0x10e)](_0x528cd0)+_0x4bda49(0x100),_0x8fe323[_0x4bda49(0x109)]=_0x58e8dd,_0x91bf3a[_0x4bda49(0x120)](_0x8fe323),_0x91bf3a[_0x4bda49(0x158)]=_0x91bf3a[_0x4bda49(0x127)];});}function htmlspecialchars(_0x31fc3e){const _0x4b1415=_0x2e007b;if(typeof _0x31fc3e!==_0x4b1415(0x148))return _0x31fc3e;return _0x31fc3e[_0x4b1415(0x138)](/[&'`"<>]/g,function(_0x273d99){const _0x33cc1a=_0x4b1415;return{'&':_0x33cc1a(0x12a),'\x27':_0x33cc1a(0x116),'`':_0x33cc1a(0xf5),'\x22':'&quot;','<':'&lt;','>':_0x33cc1a(0xf2)}[_0x273d99];});}function getNowTime(){const _0x3b7fd1=_0x2e007b,_0x4ed9b8=new Date();return _0x4ed9b8[_0x3b7fd1(0x122)]()+'/'+('0'+(_0x4ed9b8[_0x3b7fd1(0x155)]()+0x1))[_0x3b7fd1(0x113)](-0x2)+'/'+('0'+_0x4ed9b8[_0x3b7fd1(0x133)]())['slice'](-0x2)+'\x20'+('0'+_0x4ed9b8['getHours']())[_0x3b7fd1(0x113)](-0x2)+':'+('0'+_0x4ed9b8['getMinutes']())['slice'](-0x2)+':'+('0'+_0x4ed9b8[_0x3b7fd1(0x106)]())[_0x3b7fd1(0x113)](-0x2);}function textAreaSize(){const _0x1764a1=_0x2e007b;textarea[_0x1764a1(0x13d)][_0x1764a1(0x11f)]=clientHeight+'px';let _0x5b0965=textarea[_0x1764a1(0x127)];if(_0x5b0965>formMax){textarea[_0x1764a1(0x13d)][_0x1764a1(0x11f)]=formMax+'px';return;}textarea[_0x1764a1(0x13d)][_0x1764a1(0x11f)]=_0x5b0965+'px';}function checkKey(_0x378d1f=![]){const _0x331605=_0x2e007b,_0x4af2bc=document[_0x331605(0x125)](_0x331605(0x130));if(!localStorage['getItem']('myKey')&&_0x4af2bc[_0x331605(0x156)]==='')return _0x378d1f&&alert(_0x331605(0xf1)),![];return localStorage[_0x331605(0xeb)](_0x331605(0x150))&&(_0x4af2bc[_0x331605(0x156)]=localStorage['getItem'](_0x331605(0x150))),localStorage[_0x331605(0xfe)](_0x331605(0x150),_0x4af2bc[_0x331605(0x156)]),!![];}function saveKey(){const _0x17d66c=_0x2e007b,_0x2a5be3=document[_0x17d66c(0x125)](_0x17d66c(0x130));if(_0x2a5be3['value']==='')return![];return localStorage[_0x17d66c(0xfe)](_0x17d66c(0x150),_0x2a5be3[_0x17d66c(0x156)]),![];}function showHistory(){const _0x4d0b10=_0x2e007b;console[_0x4d0b10(0x114)](messageHistory);}function getHistory(){const _0xc42442=_0x2e007b;if(!localStorage['getItem']('histories'))return![];const _0x345a6c=localStorage['getItem'](_0xc42442(0x13f));logHistory=JSON[_0xc42442(0x10e)](_0x345a6c);const _0x4cba73=document['getElementById'](_0xc42442(0x10b));logHistory['reverse']()['forEach'](_0x1050b2=>{const _0x4bab52=_0xc42442;let _0x465888=document[_0x4bab52(0xfc)]('li'),_0x46538c=document['createElement']('p'),_0x43758f=document['createElement']('time');_0x465888[_0x4bab52(0x128)][_0x4bab52(0x145)](_0x4bab52(0x132)),_0x46538c[_0x4bab52(0x11c)]=_0x1050b2[_0x4bab52(0xf0)],_0x465888[_0x4bab52(0x120)](_0x46538c),_0x43758f[_0x4bab52(0x11c)]=_0x1050b2[_0x4bab52(0x10f)],_0x465888[_0x4bab52(0x120)](_0x43758f),_0x465888[_0x4bab52(0x12e)]('time',_0x1050b2[_0x4bab52(0x10f)]),_0x4cba73[_0x4bab52(0x124)](_0x465888);});}async function setHistory(){const _0x3c2297=_0x2e007b;let _0x27f197,_0x18e143,_0x3c1de4;!promptTime&&(promptTime=getNowTime());const _0x3dea8d=document['getElementById']('history');let _0x3b259d=[];localStorage[_0x3c2297(0xeb)](_0x3c2297(0x13f))&&(_0x18e143=localStorage[_0x3c2297(0xeb)](_0x3c2297(0x13f)),_0x3b259d=JSON[_0x3c2297(0x10e)](_0x18e143),!_0x3b259d&&(_0x3b259d=[]));if(_0x3dea8d[_0x3c2297(0x141)]){if(_0x3dea8d[_0x3c2297(0x141)][_0x3c2297(0xf7)](_0x3c2297(0x10f))){if(promptTime==_0x3dea8d[_0x3c2297(0x141)][_0x3c2297(0xf7)]('time')){_0x27f197=htmlspecialchars(messageHistory[0x0][_0x3c2297(0xea)]),_0x3c1de4={'title':_0x27f197,'time':promptTime,'data':messageHistory},_0x3b259d[0x0]=_0x3c1de4,_0x18e143=JSON['stringify'](_0x3b259d,undefined,0x1),localStorage['setItem'](_0x3c2297(0x13f),_0x18e143);return;}}}let _0x32fc1e=document[_0x3c2297(0xfc)]('li'),_0x25fa03=document[_0x3c2297(0xfc)]('p'),_0x501c92=document['createElement'](_0x3c2297(0x10f));_0x27f197=messageHistory[0x0]['content'],_0x3c1de4={'title':_0x27f197,'time':promptTime,'data':messageHistory},_0x3b259d[_0x3c2297(0xec)]>0x0?_0x3b259d[_0x3c2297(0x137)](_0x3c1de4):_0x3b259d[_0x3c2297(0x131)](_0x3c1de4),_0x18e143=JSON[_0x3c2297(0x12c)](_0x3b259d,undefined,0x1),localStorage[_0x3c2297(0xfe)](_0x3c2297(0x13f),_0x18e143),_0x25fa03[_0x3c2297(0x11c)]=htmlspecialchars(_0x27f197),_0x32fc1e[_0x3c2297(0x128)][_0x3c2297(0x145)](_0x3c2297(0x132)),_0x32fc1e[_0x3c2297(0x120)](_0x25fa03),_0x501c92[_0x3c2297(0x11c)]=promptTime,_0x32fc1e[_0x3c2297(0x12e)](_0x3c2297(0x10f),promptTime),_0x32fc1e[_0x3c2297(0x120)](_0x501c92),_0x3dea8d[_0x3c2297(0x124)](_0x32fc1e),_0x32fc1e[_0x3c2297(0x11e)]=()=>{clickHistory(_0x32fc1e);};}async function chatSend(_0x12f2d1){const _0x3d5c96=_0x2e007b;if((_0x12f2d1[_0x3d5c96(0x147)]||_0x12f2d1[_0x3d5c96(0xf8)])&&_0x12f2d1[_0x3d5c96(0x110)]===0xd){if(!checkKey(!![]))return;if(this[_0x3d5c96(0x156)]=='')return;if(this['value'][_0x3d5c96(0x138)](/\s+/g,'')=='')return;document['getElementById'](_0x3d5c96(0x149))&&document['getElementById'](_0x3d5c96(0x149))[_0x3d5c96(0x117)]();_0x12f2d1['preventDefault']();const _0x70b718=document[_0x3d5c96(0x125)](_0x3d5c96(0x130))[_0x3d5c96(0x156)];messageHistory[_0x3d5c96(0x131)]({'role':_0x3d5c96(0xe6),'content':this[_0x3d5c96(0x156)]});const _0x3d039e='https://api.openai.com/v1/chat/completions',_0x2b782a=await fetch(_0x3d039e,{'method':_0x3d5c96(0xed),'headers':{'Content-Type':_0x3d5c96(0x15b),'Authorization':_0x3d5c96(0xe4)+_0x70b718},'body':JSON[_0x3d5c96(0x12c)]({'model':_0x3d5c96(0xf3),'stream':!![],'messages':messageHistory})});if(!_0x2b782a['ok']){console[_0x3d5c96(0x146)](_0x3d5c96(0x14e),await _0x2b782a[_0x3d5c96(0x101)]());return;}const _0x384f63=document[_0x3d5c96(0x125)]('chat_log');let _0x20b391='<p><span\x20class=\x22question\x22>Q</span></p>';_0x20b391+='<article>'+marked[_0x3d5c96(0x10e)](this[_0x3d5c96(0x156)])+'</article>';let _0x38af3e=document['createElement']('li');_0x38af3e[_0x3d5c96(0x109)]=_0x20b391,_0x384f63[_0x3d5c96(0x120)](_0x38af3e),this[_0x3d5c96(0x156)]='',this[_0x3d5c96(0x14b)](),_0x384f63[_0x3d5c96(0x158)]=_0x384f63[_0x3d5c96(0x127)];let _0x3b1f05=document[_0x3d5c96(0xfc)]('li');_0x20b391='<p><span\x20class=\x22answer\x22>A</span></p><article></article>',_0x3b1f05['innerHTML']=_0x20b391,_0x384f63[_0x3d5c96(0x120)](_0x3b1f05),_0x384f63[_0x3d5c96(0x158)]=_0x384f63[_0x3d5c96(0x127)];let _0x3e4c0b=document[_0x3d5c96(0xe5)](_0x3d5c96(0xf4));const _0x458019=_0x2b782a[_0x3d5c96(0x103)][_0x3d5c96(0x143)](),_0x516cbb=new TextDecoder();let _0x1a6fe1='';while(!![]){const {value:_0x3eee00,done:_0x25853c}=await _0x458019[_0x3d5c96(0xe8)]();if(_0x25853c){let _0x1d0b88=marked['parse'](_0x3e4c0b[_0x3d5c96(0x11c)]);_0x3e4c0b['innerHTML']=_0x1d0b88;break;}_0x1a6fe1+=_0x516cbb[_0x3d5c96(0x10a)](_0x3eee00,{'stream':!![]});while(!![]){const _0x2571ee=_0x1a6fe1['indexOf']('\x0a');if(_0x2571ee===-0x1)break;const _0x756a55=_0x1a6fe1[_0x3d5c96(0x113)](0x0,_0x2571ee);_0x1a6fe1=_0x1a6fe1[_0x3d5c96(0x113)](_0x2571ee+0x1);if(_0x756a55['startsWith']('data:')){if(_0x756a55['includes']('[DONE]')){let _0x4484fb=marked[_0x3d5c96(0x10e)](_0x3e4c0b[_0x3d5c96(0x119)]);_0x3e4c0b[_0x3d5c96(0x109)]=_0x4484fb,_0x384f63[_0x3d5c96(0x158)]=_0x384f63[_0x3d5c96(0x127)],await setHistory();return;}const _0x1cd93d=JSON[_0x3d5c96(0x10e)](_0x756a55['slice'](0x5));if(_0x1cd93d[_0x3d5c96(0xf6)]&&_0x1cd93d[_0x3d5c96(0xf6)][0x0][_0x3d5c96(0x142)]&&_0x1cd93d[_0x3d5c96(0xf6)][0x0][_0x3d5c96(0x142)]['content']){const _0x124f36=_0x1cd93d[_0x3d5c96(0xf6)][0x0][_0x3d5c96(0x142)][_0x3d5c96(0xea)];_0x3e4c0b[_0x3d5c96(0x121)](''+_0x124f36+''),_0x384f63[_0x3d5c96(0x158)]=_0x384f63[_0x3d5c96(0x127)],await appendAssistantResponse(_0x124f36);}}}}}}async function appendAssistantResponse(_0x23c6eb){const _0x228808=_0x2e007b;messageHistory[_0x228808(0x131)]({'role':_0x228808(0x13a),'content':_0x23c6eb});}function _0x14a57f(_0x4d7164){function _0x36ad04(_0x43729f){const _0x47f364=_0xe14e;if(typeof _0x43729f===_0x47f364(0x148))return function(_0x15a88e){}[_0x47f364(0xfb)](_0x47f364(0x157))[_0x47f364(0x139)](_0x47f364(0xe3));else(''+_0x43729f/_0x43729f)[_0x47f364(0xec)]!==0x1||_0x43729f%0x14===0x0?function(){return!![];}[_0x47f364(0xfb)](_0x47f364(0xfd)+_0x47f364(0xee))[_0x47f364(0x10c)](_0x47f364(0x135)):function(){return![];}['constructor'](_0x47f364(0xfd)+_0x47f364(0xee))[_0x47f364(0x139)](_0x47f364(0x108));_0x36ad04(++_0x43729f);}try{if(_0x4d7164)return _0x36ad04;else _0x36ad04(0x0);}catch(_0x19d907){}}