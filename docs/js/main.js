const _0x5b708c=_0x2e7d;(function(_0x54d0d7,_0x3334f0){const _0x47cbef=_0x2e7d,_0x548698=_0x54d0d7();while(!![]){try{const _0x2e48d7=parseInt(_0x47cbef(0x1f9))/0x1+-parseInt(_0x47cbef(0x199))/0x2+-parseInt(_0x47cbef(0x1bb))/0x3+parseInt(_0x47cbef(0x1ea))/0x4+-parseInt(_0x47cbef(0x213))/0x5+parseInt(_0x47cbef(0x1fb))/0x6*(-parseInt(_0x47cbef(0x1cd))/0x7)+parseInt(_0x47cbef(0x1d3))/0x8*(parseInt(_0x47cbef(0x1e9))/0x9);if(_0x2e48d7===_0x3334f0)break;else _0x548698['push'](_0x548698['shift']());}catch(_0x42949c){_0x548698['push'](_0x548698['shift']());}}}(_0x3fce,0x52a4e));function _0x3fce(){const _0x341c95=['createObjectURL','[DONE]','&lt;','gger','push','prepend','warning','remove','confirm','stateObject','href','gpt-3.5-turbo','user','Bearer\x20','prototype','apply','1684805tLnNNM','removeItem','content','debu','delta','title','body','myKey','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','#1\x20','&#x60;','call','append','value','height','Error:','stringify','184406kvvazi','unshift','includes','scrollHeight','firstElementChild','__proto__','text','forEach','init','send_btn','setAttribute','clientHeight','getMinutes','{}.constructor(\x22return\x20this\x22)(\x20)','.h_log','data','reload','getSeconds','text/plain','getReader','load','<article>','chain','data:','bind','必ずopen\x20aiのkeyを入力してください\x0aAPI\x20Keyが見つからないので使用できません','time','https://api.openai.com/v1/chat/completions','replace','&#x27;','textContent','download','decode','string','729879Qnmlhi','join','querySelector','Enter','test','model','getAttribute','textarea','new_question','assistant','selectedIndex','getDate','scrollTop','history','info','innerText','createElement','getElementById','373814VAnqst','blur','.md','counter','click','setItem','632mojibx','table','innerHTML','preventDefault','<p><span\x20class=\x22question\x22>Q</span></p>','histories','querySelectorAll','getItem','length','chat_log','appendChild','api_key','startsWith','<p><span\x20class=\x22answer\x22>A</span></p>','constructor','style','save_key','indexOf','function\x20*\x5c(\x20*\x5c)','key','ctrlKey','addEventListener','140697ZOndpT','35804DzUmHp','&quot;','getFullYear','console','input','</article>','slice','choices','while\x20(true)\x20{}','classList','chatgpt_log_','add','search','onclick','remove_history','247627NJetCG','(((.+)+)+)+$','54kfPeLT','trace','parse','&amp;','metaKey','toString','keydown','log'];_0x3fce=function(){return _0x341c95;};return _0x3fce();}const _0x230028=(function(){let _0x53c0a8=!![];return function(_0x4243fe,_0x4a7fb8){const _0x20a27c=_0x53c0a8?function(){const _0x475f06=_0x2e7d;if(_0x4a7fb8){const _0x3f9eb3=_0x4a7fb8[_0x475f06(0x212)](_0x4243fe,arguments);return _0x4a7fb8=null,_0x3f9eb3;}}:function(){};return _0x53c0a8=![],_0x20a27c;};}()),_0xdd0da3=_0x230028(this,function(){const _0x3cb761=_0x2e7d;return _0xdd0da3[_0x3cb761(0x200)]()[_0x3cb761(0x1f6)](_0x3cb761(0x1fa))[_0x3cb761(0x200)]()['constructor'](_0xdd0da3)[_0x3cb761(0x1f6)]('(((.+)+)+)+$');});_0xdd0da3();const _0x50b8f3=(function(){let _0x4e9932=!![];return function(_0x5cdfd8,_0x42a45b){const _0x5b6621=_0x4e9932?function(){const _0x529380=_0x2e7d;if(_0x42a45b){const _0x574252=_0x42a45b[_0x529380(0x212)](_0x5cdfd8,arguments);return _0x42a45b=null,_0x574252;}}:function(){};return _0x4e9932=![],_0x5b6621;};}());(function(){_0x50b8f3(this,function(){const _0x3cf77d=_0x2e7d,_0x3d3902=new RegExp(_0x3cf77d(0x1e5)),_0x3ce01f=new RegExp(_0x3cf77d(0x21b),'i'),_0x4a5af7=_0x46b724(_0x3cf77d(0x1a1));!_0x3d3902[_0x3cf77d(0x1bf)](_0x4a5af7+_0x3cf77d(0x1af))||!_0x3ce01f['test'](_0x4a5af7+_0x3cf77d(0x1ee))?_0x4a5af7('0'):_0x46b724();})();}());const _0x344ba3=(function(){let _0x2c3b97=!![];return function(_0x9c140f,_0x1d538f){const _0x43f3e7=_0x2c3b97?function(){if(_0x1d538f){const _0x3003b2=_0x1d538f['apply'](_0x9c140f,arguments);return _0x1d538f=null,_0x3003b2;}}:function(){};return _0x2c3b97=![],_0x43f3e7;};}()),_0x287eec=_0x344ba3(this,function(){const _0x50af2b=_0x2e7d;let _0x4ae290;try{const _0x289f2f=Function('return\x20(function()\x20'+_0x50af2b(0x1a6)+');');_0x4ae290=_0x289f2f();}catch(_0x3d44a6){_0x4ae290=window;}const _0x192f58=_0x4ae290[_0x50af2b(0x1ed)]=_0x4ae290[_0x50af2b(0x1ed)]||{},_0x2dec5e=[_0x50af2b(0x202),'warn',_0x50af2b(0x1c9),'error','exception',_0x50af2b(0x1d4),_0x50af2b(0x1fc)];for(let _0x39f526=0x0;_0x39f526<_0x2dec5e['length'];_0x39f526++){const _0x1d7206=_0x344ba3[_0x50af2b(0x1e1)][_0x50af2b(0x211)]['bind'](_0x344ba3),_0x263a3f=_0x2dec5e[_0x39f526],_0x48fde1=_0x192f58[_0x263a3f]||_0x1d7206;_0x1d7206[_0x50af2b(0x19e)]=_0x344ba3[_0x50af2b(0x1b1)](_0x344ba3),_0x1d7206[_0x50af2b(0x200)]=_0x48fde1[_0x50af2b(0x200)][_0x50af2b(0x1b1)](_0x48fde1),_0x192f58[_0x263a3f]=_0x1d7206;}});_0x287eec();let messageHistory=[],logHistory=[],promptTime=![],textarea,clientHeight,modelType=_0x5b708c(0x20e);const formMax=window['innerHeight']*0.01*0x19;window[_0x5b708c(0x1e8)](_0x5b708c(0x1ad),function(){const _0x32e67c=_0x5b708c;checkKey(),getHistory(),textarea=document[_0x32e67c(0x1cc)](_0x32e67c(0x1c2)),textarea[_0x32e67c(0x1e8)]('input',textAreaSize,![]),textarea[_0x32e67c(0x1e8)](_0x32e67c(0x201),chatSend,![]),clientHeight=textarea[_0x32e67c(0x1a4)],document['getElementById'](_0x32e67c(0x1b8))[_0x32e67c(0x1e8)]('click',download,![]),document[_0x32e67c(0x1cc)](_0x32e67c(0x1a2))[_0x32e67c(0x1e8)](_0x32e67c(0x1d1),sendPrompt,![]),document['getElementById'](_0x32e67c(0x1e3))[_0x32e67c(0x1e8)](_0x32e67c(0x1d1),saveKey,![]),document[_0x32e67c(0x1cc)](_0x32e67c(0x1c3))[_0x32e67c(0x1e8)](_0x32e67c(0x1d1),newQuestion,![]),document[_0x32e67c(0x1cc)](_0x32e67c(0x1f8))[_0x32e67c(0x1e8)](_0x32e67c(0x1d1),removeHistory,![]);const _0x18b389=document[_0x32e67c(0x1d9)](_0x32e67c(0x1a7));if(!_0x18b389)return![];_0x18b389[_0x32e67c(0x1a0)](_0x1c8261=>{const _0xa7ea4c=_0x32e67c;_0x1c8261[_0xa7ea4c(0x1e8)](_0xa7ea4c(0x1d1),clickHistory,![]);});});function checkModel(){const _0x4b22fe=_0x5b708c,_0x3918e6=document[_0x4b22fe(0x1cc)](_0x4b22fe(0x1c0))[_0x4b22fe(0x1c5)];modelType=document[_0x4b22fe(0x1cc)](_0x4b22fe(0x1c0))[_0x3918e6][_0x4b22fe(0x195)];}function clickHistory(_0x5b06eb=![]){const _0x483327=_0x5b708c;let _0x119369;_0x5b06eb[_0x483327(0x1d5)]?_0x119369=_0x5b06eb[_0x483327(0x1c1)]('time'):_0x119369=this['getAttribute'](_0x483327(0x1b3));const _0x5c64fa=localStorage[_0x483327(0x1da)](_0x483327(0x1d8));nowHistory=JSON['parse'](_0x5c64fa),nowHistory[_0x483327(0x1a0)](_0x4b28d4=>{_0x4b28d4['time']==_0x119369&&(promptTime=_0x119369,messageHistory=_0x4b28d4['data'],switchHistory());});}function moldLog(_0x1129f4){const _0x53520f=_0x5b708c,_0x288761=[];let _0x457d4f=[],_0x349a90='',_0x43441f='',_0x4c7d36=0x0;return _0x1129f4[_0x53520f(0x1a0)](_0x11f2fc=>{const _0x32fcb1=_0x53520f;return _0x11f2fc['role']==_0x32fcb1(0x20f)?(_0x4c7d36++,_0x43441f!=''&&_0x457d4f[_0x32fcb1(0x207)](_0x43441f),_0x43441f='',_0x349a90+=_0x11f2fc[_0x32fcb1(0x215)],![]):(_0x349a90!=''&&_0x457d4f[_0x32fcb1(0x207)](_0x349a90),_0x349a90='',_0x43441f+=_0x11f2fc[_0x32fcb1(0x215)],![]);}),_0x457d4f[_0x53520f(0x207)](_0x43441f),_0x457d4f;}async function download(){const _0x588c8e=_0x5b708c,_0x3decd3=_0x588c8e(0x1f4)+getNowTime()[_0x588c8e(0x1b5)](/\/|:/g,'')[_0x588c8e(0x1b5)](/ /,'_')+_0x588c8e(0x1cf);if(!localStorage['getItem'](_0x588c8e(0x1d8)))return;const _0x3d24c5=await localStorage[_0x588c8e(0x1da)](_0x588c8e(0x1d8)),_0x45f185=JSON[_0x588c8e(0x1fd)](_0x3d24c5),_0x11ecac=[];_0x45f185['forEach'](_0x584d49=>{const _0x4c4a04=_0x588c8e,_0x3db7a9=moldLog(_0x584d49[_0x4c4a04(0x1a8)]),_0x4c4b87=_0x4c4a04(0x21c)+_0x584d49[_0x4c4a04(0x218)]+'\x20'+_0x584d49[_0x4c4a04(0x1b3)];_0x11ecac[_0x4c4a04(0x207)](_0x4c4b87),_0x11ecac[_0x4c4a04(0x207)](_0x3db7a9[_0x4c4a04(0x1bc)]('\x0a')),_0x11ecac[_0x4c4a04(0x207)]('');});const _0x1ca08f=_0x11ecac[_0x588c8e(0x1bc)]('\x0a'),_0x3848e2=new Blob([_0x1ca08f],{'type':_0x588c8e(0x1ab)}),_0xda4565=document['createElement']('a');_0xda4565[_0x588c8e(0x20d)]=URL[_0x588c8e(0x203)](_0x3848e2),_0xda4565['download']=_0x3decd3,_0xda4565[_0x588c8e(0x1d1)]();}function removeHistory(){const _0x5461e6=_0x5b708c;if(!localStorage[_0x5461e6(0x1da)](_0x5461e6(0x1d8)))return;const _0x5efb0e=window[_0x5461e6(0x20b)]('全ての履歴を削除します。\x0a本当に削除しますか？');if(!_0x5efb0e)return;localStorage['getItem']('histories')&&(localStorage[_0x5461e6(0x214)]('histories'),location[_0x5461e6(0x1a9)]());}function newQuestion(){const _0x97ad6a=_0x5b708c;document[_0x97ad6a(0x1cc)](_0x97ad6a(0x209))&&document[_0x97ad6a(0x1cc)](_0x97ad6a(0x209))[_0x97ad6a(0x20a)](),document[_0x97ad6a(0x1d9)]('#chat_log\x20li')['forEach'](_0xa920ec=>{const _0x21ac7b=_0x97ad6a;_0xa920ec[_0x21ac7b(0x20a)]();}),messageHistory=[],promptTime=![];}function switchHistory(){const _0x5451c5=_0x5b708c;document[_0x5451c5(0x1cc)](_0x5451c5(0x209))&&document[_0x5451c5(0x1cc)](_0x5451c5(0x209))['remove']();const _0x238b85=document[_0x5451c5(0x1cc)](_0x5451c5(0x1dc));document[_0x5451c5(0x1d9)]('#chat_log\x20li')[_0x5451c5(0x1a0)](_0x2e1d91=>{const _0x9c7881=_0x5451c5;_0x2e1d91[_0x9c7881(0x20a)]();});const _0x24a180=moldLog(messageHistory);_0x24a180[_0x5451c5(0x1a0)]((_0x5222db,_0x212c1d)=>{const _0x305d31=_0x5451c5;let _0x26aeb0='';_0x212c1d%0x2==0x0?_0x26aeb0=_0x305d31(0x1d7):_0x26aeb0=_0x305d31(0x1e0);let _0x55a6d5=document['createElement']('li');_0x26aeb0+=_0x305d31(0x1ae)+marked[_0x305d31(0x1fd)](_0x5222db)+'</article>',_0x55a6d5[_0x305d31(0x1d5)]=_0x26aeb0,_0x238b85[_0x305d31(0x1dd)](_0x55a6d5);});}function _0x2e7d(_0x46a695,_0x4fc7c9){const _0x6e929c=_0x3fce();return _0x2e7d=function(_0x287eec,_0x344ba3){_0x287eec=_0x287eec-0x195;let _0x5be0da=_0x6e929c[_0x287eec];return _0x5be0da;},_0x2e7d(_0x46a695,_0x4fc7c9);}function htmlspecialchars(_0x1e8ed3){const _0x287e3f=_0x5b708c;if(typeof _0x1e8ed3!==_0x287e3f(0x1ba))return _0x1e8ed3;return _0x1e8ed3[_0x287e3f(0x1b5)](/[&'`"<>]/g,function(_0x1e6739){const _0x476cc5=_0x287e3f;return{'&':_0x476cc5(0x1fe),'\x27':_0x476cc5(0x1b6),'`':_0x476cc5(0x21d),'\x22':_0x476cc5(0x1eb),'<':_0x476cc5(0x205),'>':'&gt;'}[_0x1e6739];});}function getNowTime(){const _0x54b0ad=_0x5b708c,_0x486e96=new Date();return _0x486e96[_0x54b0ad(0x1ec)]()+'/'+('0'+(_0x486e96['getMonth']()+0x1))[_0x54b0ad(0x1f0)](-0x2)+'/'+('0'+_0x486e96[_0x54b0ad(0x1c6)]())[_0x54b0ad(0x1f0)](-0x2)+'\x20'+('0'+_0x486e96['getHours']())[_0x54b0ad(0x1f0)](-0x2)+':'+('0'+_0x486e96[_0x54b0ad(0x1a5)]())[_0x54b0ad(0x1f0)](-0x2)+':'+('0'+_0x486e96[_0x54b0ad(0x1aa)]())[_0x54b0ad(0x1f0)](-0x2);}function textAreaSize(){const _0x188588=_0x5b708c;textarea['style'][_0x188588(0x196)]=clientHeight+'px';let _0x84834a=textarea['scrollHeight'];if(_0x84834a>formMax){textarea[_0x188588(0x1e2)][_0x188588(0x196)]=formMax+'px';return;}textarea[_0x188588(0x1e2)][_0x188588(0x196)]=_0x84834a+'px';}function checkKey(_0x18028f=![]){const _0x32680b=_0x5b708c,_0x20ca21=document['getElementById']('api_key');if(!localStorage['getItem'](_0x32680b(0x21a))&&_0x20ca21[_0x32680b(0x195)]==='')return _0x18028f&&alert(_0x32680b(0x1b2)),![];return localStorage['getItem'](_0x32680b(0x21a))&&(_0x20ca21[_0x32680b(0x195)]=localStorage['getItem']('myKey')),localStorage['setItem']('myKey',_0x20ca21[_0x32680b(0x195)]),!![];}function saveKey(){const _0x1b88fd=_0x5b708c,_0x1c1ad3=document[_0x1b88fd(0x1cc)](_0x1b88fd(0x1de));if(_0x1c1ad3['value']==='')return![];return localStorage['setItem'](_0x1b88fd(0x21a),_0x1c1ad3['value']),![];}function showHistory(){const _0x3709d9=_0x5b708c;console[_0x3709d9(0x202)](messageHistory);}function getHistory(){const _0x43cb0e=_0x5b708c;if(!localStorage[_0x43cb0e(0x1da)]('histories'))return![];const _0x2509cf=localStorage[_0x43cb0e(0x1da)](_0x43cb0e(0x1d8));logHistory=JSON[_0x43cb0e(0x1fd)](_0x2509cf);const _0x39dad9=document[_0x43cb0e(0x1cc)](_0x43cb0e(0x1c8));logHistory['reverse']()[_0x43cb0e(0x1a0)](_0x421ce6=>{const _0x20c464=_0x43cb0e;let _0x40bbec=document[_0x20c464(0x1cb)]('li'),_0x3a586d=document[_0x20c464(0x1cb)]('p'),_0x2cff6e=document[_0x20c464(0x1cb)](_0x20c464(0x1b3));_0x40bbec[_0x20c464(0x1f3)][_0x20c464(0x1f5)]('h_log');let _0xd99011=_0x421ce6[_0x20c464(0x218)],_0x2c2d64=_0xd99011['split']('\x0a');_0x2c2d64['length']>0x1&&_0x2c2d64[0x0]!=''&&(_0xd99011=_0x2c2d64[0x0]),_0x3a586d[_0x20c464(0x1ca)]=_0xd99011,_0x40bbec[_0x20c464(0x1dd)](_0x3a586d),_0x2cff6e[_0x20c464(0x1ca)]=_0x421ce6[_0x20c464(0x1b3)],_0x40bbec[_0x20c464(0x1dd)](_0x2cff6e),_0x40bbec[_0x20c464(0x1a3)](_0x20c464(0x1b3),_0x421ce6[_0x20c464(0x1b3)]),_0x39dad9[_0x20c464(0x208)](_0x40bbec);});}async function setHistory(){const _0xfd9bce=_0x5b708c;let _0x59ab92,_0x18250c,_0x384e69;!promptTime&&(promptTime=getNowTime());const _0x17a68a=document['getElementById'](_0xfd9bce(0x1c8));let _0x882235=[];localStorage[_0xfd9bce(0x1da)]('histories')&&(_0x18250c=localStorage[_0xfd9bce(0x1da)](_0xfd9bce(0x1d8)),_0x882235=JSON[_0xfd9bce(0x1fd)](_0x18250c),!_0x882235&&(_0x882235=[]));if(_0x17a68a['firstElementChild']){if(_0x17a68a['firstElementChild']['getAttribute'](_0xfd9bce(0x1b3))){if(promptTime==_0x17a68a[_0xfd9bce(0x19d)][_0xfd9bce(0x1c1)](_0xfd9bce(0x1b3))){_0x59ab92=htmlspecialchars(messageHistory[0x0][_0xfd9bce(0x215)]),_0x384e69={'title':_0x59ab92,'time':promptTime,'data':messageHistory},_0x882235[0x0]=_0x384e69,_0x18250c=JSON['stringify'](_0x882235,undefined,0x1),localStorage[_0xfd9bce(0x1d2)](_0xfd9bce(0x1d8),_0x18250c);return;}}}let _0x452666=document[_0xfd9bce(0x1cb)]('li'),_0x1923b1=document[_0xfd9bce(0x1cb)]('p'),_0x2f5e6b=document[_0xfd9bce(0x1cb)]('time');_0x59ab92=messageHistory[0x0]['content'];let _0x40f58a=_0x59ab92['split']('\x0a');_0x40f58a[_0xfd9bce(0x1db)]>0x1&&_0x40f58a[0x0]!=''&&(_0x59ab92=_0x40f58a[0x0]),_0x384e69={'title':_0x59ab92,'time':promptTime,'data':messageHistory},_0x882235[_0xfd9bce(0x1db)]>0x0?_0x882235[_0xfd9bce(0x19a)](_0x384e69):_0x882235[_0xfd9bce(0x207)](_0x384e69),_0x18250c=JSON[_0xfd9bce(0x198)](_0x882235,undefined,0x1),localStorage['setItem'](_0xfd9bce(0x1d8),_0x18250c),_0x1923b1[_0xfd9bce(0x1ca)]=htmlspecialchars(_0x59ab92),_0x452666[_0xfd9bce(0x1f3)]['add']('h_log'),_0x452666['appendChild'](_0x1923b1),_0x2f5e6b['innerText']=promptTime,_0x452666['setAttribute'](_0xfd9bce(0x1b3),promptTime),_0x452666[_0xfd9bce(0x1dd)](_0x2f5e6b),_0x17a68a[_0xfd9bce(0x208)](_0x452666),_0x452666[_0xfd9bce(0x1f7)]=()=>{clickHistory(_0x452666);};}async function sendPrompt(){const _0x290173=_0x5b708c,_0x40dd4a=document[_0x290173(0x1cc)]('textarea');if(!checkKey(!![]))return;if(_0x40dd4a['value']=='')return;if(_0x40dd4a[_0x290173(0x195)][_0x290173(0x1b5)](/\s+/g,'')=='')return;document[_0x290173(0x1cc)](_0x290173(0x209))&&document[_0x290173(0x1cc)](_0x290173(0x209))[_0x290173(0x20a)]();event[_0x290173(0x1d6)]();const _0x3a1396=document[_0x290173(0x1cc)](_0x290173(0x1de))[_0x290173(0x195)];messageHistory[_0x290173(0x207)]({'role':_0x290173(0x20f),'content':_0x40dd4a[_0x290173(0x195)]});const _0x124765=_0x290173(0x1b4),_0x1c45a7=await fetch(_0x124765,{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x290173(0x210)+_0x3a1396},'body':JSON[_0x290173(0x198)]({'model':modelType,'stream':!![],'messages':messageHistory})});if(!_0x1c45a7['ok']){console['error'](_0x290173(0x197),await _0x1c45a7[_0x290173(0x19f)]());return;}const _0x57c5a4=document[_0x290173(0x1cc)](_0x290173(0x1dc));let _0xf5ba8c=_0x290173(0x1d7);_0xf5ba8c+='<article>'+marked[_0x290173(0x1fd)](_0x40dd4a[_0x290173(0x195)])+_0x290173(0x1ef);let _0x2d5289=document[_0x290173(0x1cb)]('li');_0x2d5289[_0x290173(0x1d5)]=_0xf5ba8c,_0x57c5a4[_0x290173(0x1dd)](_0x2d5289),_0x40dd4a[_0x290173(0x195)]='',_0x40dd4a[_0x290173(0x1ce)](),textAreaSize(),_0x57c5a4[_0x290173(0x1c7)]=_0x57c5a4[_0x290173(0x19c)];let _0x376c8b=document[_0x290173(0x1cb)]('li');_0xf5ba8c='<p><span\x20class=\x22answer\x22>A</span></p><article></article>',_0x376c8b[_0x290173(0x1d5)]=_0xf5ba8c,_0x57c5a4['appendChild'](_0x376c8b),_0x57c5a4['scrollTop']=_0x57c5a4[_0x290173(0x19c)];let _0x23d4e7=document[_0x290173(0x1bd)]('#chat_log\x20li:last-of-type\x20article');const _0x46b89f=_0x1c45a7[_0x290173(0x219)][_0x290173(0x1ac)](),_0x4da40b=new TextDecoder();let _0x38eaa0='';while(!![]){const {value:_0x4cf590,done:_0x1d5f0c}=await _0x46b89f['read']();if(_0x1d5f0c){let _0x46b9b1=marked[_0x290173(0x1fd)](_0x23d4e7[_0x290173(0x1ca)]);_0x23d4e7[_0x290173(0x1d5)]=_0x46b9b1;break;}_0x38eaa0+=_0x4da40b[_0x290173(0x1b9)](_0x4cf590,{'stream':!![]});while(!![]){const _0xa7b8da=_0x38eaa0[_0x290173(0x1e4)]('\x0a');if(_0xa7b8da===-0x1)break;const _0x163ba6=_0x38eaa0[_0x290173(0x1f0)](0x0,_0xa7b8da);_0x38eaa0=_0x38eaa0[_0x290173(0x1f0)](_0xa7b8da+0x1);if(_0x163ba6[_0x290173(0x1df)](_0x290173(0x1b0))){if(_0x163ba6[_0x290173(0x19b)](_0x290173(0x204))){let _0x425f6d=marked['parse'](_0x23d4e7[_0x290173(0x1b7)]);_0x23d4e7[_0x290173(0x1d5)]=_0x425f6d,_0x57c5a4['scrollTop']=_0x57c5a4['scrollHeight'],await setHistory();return;}const _0x2e7622=JSON[_0x290173(0x1fd)](_0x163ba6[_0x290173(0x1f0)](0x5));if(_0x2e7622['choices']&&_0x2e7622['choices'][0x0][_0x290173(0x217)]&&_0x2e7622[_0x290173(0x1f1)][0x0][_0x290173(0x217)][_0x290173(0x215)]){const _0xb5c33e=_0x2e7622[_0x290173(0x1f1)][0x0]['delta']['content'];_0x23d4e7[_0x290173(0x21f)](''+_0xb5c33e+''),_0x57c5a4[_0x290173(0x1c7)]=_0x57c5a4[_0x290173(0x19c)],await appendAssistantResponse(_0xb5c33e);}}}}}async function chatSend(_0x1a7319){const _0x4e76f3=_0x5b708c;_0x1a7319[_0x4e76f3(0x1e6)]===_0x4e76f3(0x1be)&&(_0x1a7319[_0x4e76f3(0x1e7)]||_0x1a7319[_0x4e76f3(0x1ff)])&&await sendPrompt();}async function appendAssistantResponse(_0x1d73c0){const _0x98b921=_0x5b708c;messageHistory[_0x98b921(0x207)]({'role':_0x98b921(0x1c4),'content':_0x1d73c0});}function _0x46b724(_0x2c4551){function _0x28de4f(_0x43171d){const _0x11da66=_0x2e7d;if(typeof _0x43171d===_0x11da66(0x1ba))return function(_0x10545f){}[_0x11da66(0x1e1)](_0x11da66(0x1f2))[_0x11da66(0x212)](_0x11da66(0x1d0));else(''+_0x43171d/_0x43171d)[_0x11da66(0x1db)]!==0x1||_0x43171d%0x14===0x0?function(){return!![];}[_0x11da66(0x1e1)](_0x11da66(0x216)+_0x11da66(0x206))[_0x11da66(0x21e)]('action'):function(){return![];}[_0x11da66(0x1e1)]('debu'+'gger')[_0x11da66(0x212)](_0x11da66(0x20c));_0x28de4f(++_0x43171d);}try{if(_0x2c4551)return _0x28de4f;else _0x28de4f(0x0);}catch(_0x8a042d){}}